<mxfile host="app.diagrams.net" agent="Mozilla/5.0" version="24.7.17">
  <diagram name="Nova Platform Architecture" id="nova-arch-v2">
    <mxGraphModel dx="1434" dy="780" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1600" pageHeight="1200" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        
        <!-- Title -->
        <mxCell id="title" value="rd-bedrock-nova Architecture (Serverless)" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=24;fontStyle=1;fontColor=#232F3E;" vertex="1" parent="1">
          <mxGeometry x="600" y="20" width="400" height="40" as="geometry" />
        </mxCell>
        
        <!-- Frontend Layer -->
        <mxCell id="frontend-box" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E8F4F8;strokeColor=#147EBA;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="100" y="80" width="1400" height="160" as="geometry" />
        </mxCell>
        <mxCell id="frontend-label" value="FRONTEND LAYER" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=14;fontStyle=1;fontColor=#147EBA;" vertex="1" parent="1">
          <mxGeometry x="120" y="90" width="200" height="20" as="geometry" />
        </mxCell>
        
        <!-- Next.js -->
        <mxCell id="nextjs" value="Next.js 15&#xa;(Static Export)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#232F3E;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="150" y="120" width="120" height="60" as="geometry" />
        </mxCell>
        
        <!-- Landing Page -->
        <mxCell id="landing" value="/ Landing" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FAFAFA;strokeColor=#545B64;" vertex="1" parent="1">
          <mxGeometry x="320" y="120" width="100" height="40" as="geometry" />
        </mxCell>
        
        <!-- CopilotKit Chat -->
        <mxCell id="copilot" value="/copilot/&#xa;CopilotKit Chat" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FF9900;strokeColor=#232F3E;fontColor=#FFFFFF;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="460" y="110" width="140" height="60" as="geometry" />
        </mxCell>
        
        <!-- Settings -->
        <mxCell id="settings" value="/settings/&#xa;Lambda URL設定" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FAFAFA;strokeColor=#545B64;" vertex="1" parent="1">
          <mxGeometry x="640" y="120" width="120" height="40" as="geometry" />
        </mxCell>
        
        <!-- S3 Static Hosting -->
        <mxCell id="s3-static" value="S3 + CloudFront&#xa;(Static Hosting)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#3F8624;strokeColor=#232F3E;fontColor=#FFFFFF;" vertex="1" parent="1">
          <mxGeometry x="1280" y="120" width="140" height="60" as="geometry" />
        </mxCell>
        
        <!-- AG-UI Arrow -->
        <mxCell id="agui-arrow" value="AG-UI Protocol&#xa;(SSE Streaming)" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#FF9900;strokeWidth=3;fontColor=#FF9900;fontStyle=1;" edge="1" parent="1" source="copilot" target="agui-handler">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <!-- Compute Layer -->
        <mxCell id="compute-box" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFF4E5;strokeColor=#FF9900;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="100" y="280" width="1400" height="280" as="geometry" />
        </mxCell>
        <mxCell id="compute-label" value="COMPUTE LAYER (AWS Lambda)" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=14;fontStyle=1;fontColor=#FF9900;" vertex="1" parent="1">
          <mxGeometry x="120" y="290" width="300" height="20" as="geometry" />
        </mxCell>
        
        <!-- AG-UI Handler -->
        <mxCell id="agui-handler" value="AG-UI Handler&#xa;(Function URL)&#xa;&#xa;nova-ag-ui-handler&#xa;1024MB / 300s" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FF9900;strokeColor=#232F3E;fontColor=#FFFFFF;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="420" y="320" width="180" height="100" as="geometry" />
        </mxCell>
        
        <!-- Agent Core -->
        <mxCell id="agent-core" value="Agent Core&#xa;(Container Image)&#xa;&#xa;Strands SDK&#xa;nova-agent-core&#xa;1024MB / 300s" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#232F3E;strokeColor=#FF9900;fontColor=#FFFFFF;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="680" y="320" width="180" height="100" as="geometry" />
        </mxCell>
        
        <!-- Tool Lambdas -->
        <mxCell id="audio-fn" value="Audio Handler&#xa;Nova Sonic&#xa;256MB / 300s" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#C925D1;strokeColor=#232F3E;fontColor=#FFFFFF;" vertex="1" parent="1">
          <mxGeometry x="200" y="460" width="140" height="80" as="geometry" />
        </mxCell>
        
        <mxCell id="video-fn" value="Video Handler&#xa;Nova Omni&#xa;512MB / 300s" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#C925D1;strokeColor=#232F3E;fontColor=#FFFFFF;" vertex="1" parent="1">
          <mxGeometry x="380" y="460" width="140" height="80" as="geometry" />
        </mxCell>
        
        <mxCell id="search-fn" value="Search Handler&#xa;Nova Embeddings&#xa;+ S3 Vectors&#xa;256MB / 60s" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#C925D1;strokeColor=#232F3E;fontColor=#FFFFFF;" vertex="1" parent="1">
          <mxGeometry x="560" y="460" width="140" height="80" as="geometry" />
        </mxCell>
        
        <mxCell id="projector-fn" value="Event Projector&#xa;DynamoDB Stream&#xa;→ Read Model&#xa;256MB / 60s" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#3334B9;strokeColor=#232F3E;fontColor=#FFFFFF;" vertex="1" parent="1">
          <mxGeometry x="740" y="460" width="140" height="80" as="geometry" />
        </mxCell>
        
        <!-- ECR -->
        <mxCell id="ecr" value="ECR&#xa;Container Registry" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ED7100;strokeColor=#232F3E;fontColor=#FFFFFF;" vertex="1" parent="1">
          <mxGeometry x="1280" y="340" width="140" height="60" as="geometry" />
        </mxCell>
        
        <!-- API Gateway -->
        <mxCell id="apigw" value="API Gateway&#xa;(REST API)&#xa;&#xa;/agent /audio&#xa;/video /search" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E7157B;strokeColor=#232F3E;fontColor=#FFFFFF;" vertex="1" parent="1">
          <mxGeometry x="1000" y="320" width="160" height="100" as="geometry" />
        </mxCell>
        
        <!-- Data Layer -->
        <mxCell id="data-box" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E8F5E9;strokeColor=#3F8624;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="100" y="600" width="1400" height="180" as="geometry" />
        </mxCell>
        <mxCell id="data-label" value="DATA LAYER (Serverless)" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=14;fontStyle=1;fontColor=#3F8624;" vertex="1" parent="1">
          <mxGeometry x="120" y="610" width="300" height="20" as="geometry" />
        </mxCell>
        
        <!-- DynamoDB Tables -->
        <mxCell id="event-store" value="DynamoDB&#xa;Event Store&#xa;&#xa;pk/sk + GSI&#xa;Stream: ON" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#3334B9;strokeColor=#232F3E;fontColor=#FFFFFF;" vertex="1" parent="1">
          <mxGeometry x="150" y="650" width="140" height="100" as="geometry" />
        </mxCell>
        
        <mxCell id="read-model" value="DynamoDB&#xa;Read Model&#xa;&#xa;CQRS Query&#xa;On-Demand" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#3334B9;strokeColor=#232F3E;fontColor=#FFFFFF;" vertex="1" parent="1">
          <mxGeometry x="330" y="650" width="140" height="100" as="geometry" />
        </mxCell>
        
        <mxCell id="session-memory" value="DynamoDB&#xa;Session Memory&#xa;&#xa;TTL: ON&#xa;Redis代替" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#3334B9;strokeColor=#232F3E;fontColor=#FFFFFF;" vertex="1" parent="1">
          <mxGeometry x="510" y="650" width="140" height="100" as="geometry" />
        </mxCell>
        
        <!-- S3 -->
        <mxCell id="s3-content" value="S3 Bucket&#xa;Content Storage&#xa;&#xa;Audio / Video&#xa;Images / Docs" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#3F8624;strokeColor=#232F3E;fontColor=#FFFFFF;" vertex="1" parent="1">
          <mxGeometry x="690" y="650" width="140" height="100" as="geometry" />
        </mxCell>
        
        <!-- S3 Vectors -->
        <mxCell id="s3-vectors" value="S3 Vectors&#xa;(Preview)&#xa;&#xa;Vector Search&#xa;90% Cost ↓" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#1E8900;strokeColor=#232F3E;fontColor=#FFFFFF;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="870" y="650" width="140" height="100" as="geometry" />
        </mxCell>
        
        <!-- CloudWatch -->
        <mxCell id="cloudwatch" value="CloudWatch&#xa;Logs / Metrics" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#759C3E;strokeColor=#232F3E;fontColor=#FFFFFF;" vertex="1" parent="1">
          <mxGeometry x="1280" y="650" width="140" height="60" as="geometry" />
        </mxCell>
        
        <!-- Bedrock Layer -->
        <mxCell id="bedrock-box" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#F3E5F5;strokeColor=#C925D1;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="100" y="820" width="1400" height="140" as="geometry" />
        </mxCell>
        <mxCell id="bedrock-label" value="AWS BEDROCK (AI/ML Models)" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=14;fontStyle=1;fontColor=#C925D1;" vertex="1" parent="1">
          <mxGeometry x="120" y="830" width="300" height="20" as="geometry" />
        </mxCell>
        
        <!-- Nova Models -->
        <mxCell id="nova-sonic" value="Nova Sonic&#xa;&#xa;• 音声認識&#xa;• 話者識別&#xa;• 感情分析" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#C925D1;strokeColor=#232F3E;fontColor=#FFFFFF;" vertex="1" parent="1">
          <mxGeometry x="200" y="860" width="160" height="90" as="geometry" />
        </mxCell>
        
        <mxCell id="nova-omni" value="Nova Omni&#xa;&#xa;• 映像理解&#xa;• 時系列分析&#xa;• 異常検知" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#C925D1;strokeColor=#232F3E;fontColor=#FFFFFF;" vertex="1" parent="1">
          <mxGeometry x="420" y="860" width="160" height="90" as="geometry" />
        </mxCell>
        
        <mxCell id="nova-embeddings" value="Nova Multimodal&#xa;Embeddings&#xa;&#xa;• マルチモーダル埋め込み&#xa;• 統一ベクトル空間" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#C925D1;strokeColor=#232F3E;fontColor=#FFFFFF;" vertex="1" parent="1">
          <mxGeometry x="640" y="860" width="180" height="90" as="geometry" />
        </mxCell>
        
        <mxCell id="claude" value="Claude 3.5 Sonnet&#xa;&#xa;Foundation Model&#xa;(Agent Orchestration)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#232F3E;strokeColor=#C925D1;fontColor=#FFFFFF;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="880" y="860" width="180" height="90" as="geometry" />
        </mxCell>
        
        <!-- Guardrails -->
        <mxCell id="guardrails" value="Bedrock&#xa;Guardrails" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#DD344C;strokeColor=#232F3E;fontColor=#FFFFFF;" vertex="1" parent="1">
          <mxGeometry x="1120" y="870" width="120" height="60" as="geometry" />
        </mxCell>
        
        <!-- Connections -->
        <mxCell id="conn1" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#232F3E;" edge="1" parent="1" source="agui-handler" target="agent-core">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <mxCell id="conn2" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#232F3E;" edge="1" parent="1" source="agent-core" target="audio-fn">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <mxCell id="conn3" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#232F3E;" edge="1" parent="1" source="agent-core" target="video-fn">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <mxCell id="conn4" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#232F3E;" edge="1" parent="1" source="agent-core" target="search-fn">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>

