# Nova Platform - Bedrock Nova + Strands Agent Core + S3 Vectors

> **Amazon Bedrock Nova ã‚·ãƒªãƒ¼ã‚ºã¨ Strands Agent Core ã‚’æ´»ç”¨ã—ãŸæ¬¡ä¸–ä»£ãƒãƒ«ãƒãƒ¢ãƒ¼ãƒ€ãƒ«AIãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ **

## ğŸ¯ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ç›®çš„

ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯ã€AWS ã®æœ€æ–° AI æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯ã‚’çµ±åˆæ¤œè¨¼ã™ã‚‹ãŸã‚ã®**ãƒªã‚µãƒ¼ãƒ & ãƒ—ãƒ­ãƒˆã‚¿ã‚¤ãƒ”ãƒ³ã‚°**ãƒªãƒã‚¸ãƒˆãƒªã§ã™ã€‚

### ãªãœã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãŒå¿…è¦ã‹

| å¾“æ¥ã®ã‚¢ãƒ—ãƒ­ãƒ¼ãƒ | ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ã‚¢ãƒ—ãƒ­ãƒ¼ãƒ |
|---------------|----------------------|
| ãƒ¢ãƒ‡ãƒ«å‘¼ã³å‡ºã—ã®ã¿ | **Agent Core** ã«ã‚ˆã‚‹ã‚ªãƒ¼ã‚±ã‚¹ãƒˆãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ |
| å˜ä¸€ãƒ¢ãƒ€ãƒªãƒ†ã‚£ | **ãƒãƒ«ãƒãƒ¢ãƒ¼ãƒ€ãƒ«çµ±åˆ** (éŸ³å£°ãƒ»æ˜ åƒãƒ»ãƒ†ã‚­ã‚¹ãƒˆãƒ»ç”»åƒ) |
| OpenSearch/é«˜ã‚³ã‚¹ãƒˆãƒ™ã‚¯ãƒˆãƒ«DB | **S3 Vectors** (90%ã‚³ã‚¹ãƒˆå‰Šæ¸›) |
| å˜ç´”ãª API ãƒ©ãƒƒãƒ‘ãƒ¼ | **ãƒ„ãƒ¼ãƒ«çµ±åˆ + Knowledge Base + Guardrails** |
| ã‚¹ãƒ†ãƒ¼ãƒˆãƒ¬ã‚¹ | **ãƒ¡ãƒ¢ãƒªç®¡ç†** (çŸ­æœŸ: Redis / é•·æœŸ: DynamoDB) |

---

## ğŸ—ï¸ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         NOVA PLATFORM ARCHITECTURE                               â”‚
â”‚                                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                      Application Layer                                   â”‚    â”‚
â”‚  â”‚  â€¢ REST API (FastAPI)  â€¢ WebSocket (ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ )  â€¢ CLI Tools          â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                      â”‚                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚              STRANDS AGENT CORE (Coordinator)                            â”‚    â”‚
â”‚  â”‚                                                                          â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚    â”‚
â”‚  â”‚  â”‚ Tool        â”‚  â”‚ Knowledge     â”‚  â”‚ Memory       â”‚  â”‚ Guardrailsâ”‚  â”‚    â”‚
â”‚  â”‚  â”‚ Orchestratorâ”‚  â”‚ Base Retrievalâ”‚  â”‚ Manager      â”‚  â”‚           â”‚  â”‚    â”‚
â”‚  â”‚  â”‚             â”‚  â”‚               â”‚  â”‚              â”‚  â”‚           â”‚  â”‚    â”‚
â”‚  â”‚  â”‚ â€¢ Audio Toolâ”‚  â”‚ â€¢ RAG Search  â”‚  â”‚ â€¢ Redis(çŸ­æœŸ)â”‚  â”‚ â€¢ Input   â”‚  â”‚    â”‚
â”‚  â”‚  â”‚ â€¢ Video Toolâ”‚  â”‚ â€¢ S3 Vectors  â”‚  â”‚ â€¢ DynamoDB   â”‚  â”‚ â€¢ Output  â”‚  â”‚    â”‚
â”‚  â”‚  â”‚ â€¢ Search    â”‚  â”‚ â€¢ Hybrid      â”‚  â”‚   (é•·æœŸ)     â”‚  â”‚ â€¢ PII     â”‚  â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚    â”‚
â”‚  â”‚                                                                          â”‚    â”‚
â”‚  â”‚  Foundation Model: Claude 3.5 Sonnet (Anthropic via Bedrock)            â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                      â”‚                                           â”‚
â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚         â”‚                            â”‚                            â”‚             â”‚
â”‚         â–¼                            â–¼                            â–¼             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚  NOVA SONIC     â”‚   â”‚   NOVA OMNI         â”‚   â”‚ NOVA MULTIMODAL     â”‚        â”‚
â”‚  â”‚  (Speech)       â”‚   â”‚   (Vision+Temporal) â”‚   â”‚ EMBEDDINGS          â”‚        â”‚
â”‚  â”‚                 â”‚   â”‚                     â”‚   â”‚                     â”‚        â”‚
â”‚  â”‚ â€¢ éŸ³å£°èªè­˜      â”‚   â”‚ â€¢ æ˜ åƒç†è§£         â”‚   â”‚ â€¢ çµ±ä¸€ãƒ™ã‚¯ãƒˆãƒ«ç©ºé–“  â”‚        â”‚
â”‚  â”‚ â€¢ è©±è€…è­˜åˆ¥      â”‚   â”‚ â€¢ æ™‚ç³»åˆ—åˆ†æ       â”‚   â”‚ â€¢ ãƒãƒ«ãƒãƒ¢ãƒ¼ãƒ€ãƒ«    â”‚        â”‚
â”‚  â”‚ â€¢ æ„Ÿæƒ…åˆ†æ      â”‚   â”‚ â€¢ ç•°å¸¸æ¤œçŸ¥         â”‚   â”‚   é¡ä¼¼æ¤œç´¢          â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚                                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                       DATA & STORAGE LAYER                               â”‚    â”‚
â”‚  â”‚                                                                          â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚    â”‚
â”‚  â”‚  â”‚ S3 VECTORS       â”‚  â”‚ S3 (Content)     â”‚  â”‚ DynamoDB             â”‚  â”‚    â”‚
â”‚  â”‚  â”‚ (Vector Search)  â”‚  â”‚                  â”‚  â”‚ (Event Store + CQRS) â”‚  â”‚    â”‚
â”‚  â”‚  â”‚                  â”‚  â”‚ â€¢ Audio files    â”‚  â”‚                      â”‚  â”‚    â”‚
â”‚  â”‚  â”‚ â€¢ åŸ‹ã‚è¾¼ã¿ä¿å­˜   â”‚  â”‚ â€¢ Video files    â”‚  â”‚ â€¢ Events (Sourcing)  â”‚  â”‚    â”‚
â”‚  â”‚  â”‚ â€¢ kNNæ¤œç´¢        â”‚  â”‚ â€¢ Images         â”‚  â”‚ â€¢ Read Models        â”‚  â”‚    â”‚
â”‚  â”‚  â”‚ â€¢ ãƒšã‚¿ãƒã‚¤ãƒˆå¯¾å¿œ â”‚  â”‚ â€¢ Documents      â”‚  â”‚ â€¢ Agent Memory       â”‚  â”‚    â”‚
â”‚  â”‚  â”‚ â€¢ 90%ã‚³ã‚¹ãƒˆå‰Šæ¸›  â”‚  â”‚                  â”‚  â”‚                      â”‚  â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”§ ã‚³ã‚¢æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯

### 1. Strands Agent Core (AWS Strands Agents SDK)

**Agent Core ã®çœŸã®ç‰¹æ€§:**

```python
from strands import Agent, Tool, tool
from strands.memory import RedisMemory, DynamoDBMemory
from strands.guardrails import BedrockGuardrails

# Agent Core ã®æœ¬æ¥ã®ä½¿ã„æ–¹
class NovaCoordinatorAgent:
    """
    Strands SDK ã‚’ä½¿ç”¨ã—ãŸãƒãƒ«ãƒãƒ¢ãƒ¼ãƒ€ãƒ«ã‚ªãƒ¼ã‚±ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¿ãƒ¼
    
    ç‰¹å¾´:
    - ãƒ„ãƒ¼ãƒ«ã®è‡ªå‹•é¸æŠãƒ»å®Ÿè¡Œ
    - ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆä¿æŒå‹ä¼šè©±
    - çŸ¥è­˜ãƒ™ãƒ¼ã‚¹çµ±åˆ
    - ã‚¬ãƒ¼ãƒ‰ãƒ¬ãƒ¼ãƒ«é©ç”¨
    """
    
    def __init__(self):
        self.agent = Agent(
            model="anthropic.claude-3-5-sonnet",
            
            # ãƒ„ãƒ¼ãƒ«å®šç¾© - Agent ãŒè‡ªå‹•çš„ã«ä½¿ã„åˆ†ã‘
            tools=[
                self.transcribe_audio,
                self.analyze_video,
                self.search_knowledge,
                self.retrieve_from_s3_vectors,
            ],
            
            # ãƒ¡ãƒ¢ãƒªç®¡ç†
            short_term_memory=RedisMemory(
                host="redis.nova.local",
                ttl_seconds=3600
            ),
            long_term_memory=DynamoDBMemory(
                table_name="nova-agent-memory"
            ),
            
            # ã‚¬ãƒ¼ãƒ‰ãƒ¬ãƒ¼ãƒ«
            guardrails=BedrockGuardrails(
                guardrail_id="nova-safety-guardrail"
            ),
            
            # ã‚·ã‚¹ãƒ†ãƒ ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ
            system_prompt="""
            ã‚ãªãŸã¯Nova Platformã®ã‚³ãƒ¼ãƒ‡ã‚£ãƒãƒ¼ã‚¿ãƒ¼ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã§ã™ã€‚
            
            åˆ©ç”¨å¯èƒ½ãªãƒ„ãƒ¼ãƒ«:
            - transcribe_audio: éŸ³å£°â†’ãƒ†ã‚­ã‚¹ãƒˆ (Nova Sonic)
            - analyze_video: æ˜ åƒã®æ™‚ç³»åˆ—è§£æ (Nova Omni)
            - search_knowledge: Knowledge Baseæ¤œç´¢
            - retrieve_from_s3_vectors: S3 Vectorsé¡ä¼¼æ¤œç´¢
            
            ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æ„å›³ã‚’ç†è§£ã—ã€æœ€é©ãªãƒ„ãƒ¼ãƒ«ã‚’çµ„ã¿åˆã‚ã›ã¦å‡¦ç†ã—ã¦ãã ã•ã„ã€‚
            """
        )
    
    @tool
    async def transcribe_audio(self, audio_url: str, language: str = "ja-JP") -> dict:
        """Nova Sonic ã§éŸ³å£°ã‚’æ–‡å­—èµ·ã“ã—"""
        # Implementation
        ...
    
    @tool
    async def analyze_video(
        self, 
        video_url: str, 
        analysis_type: str = "anomaly"
    ) -> dict:
        """Nova Omni ã§æ˜ åƒè§£æ (æ™‚ç³»åˆ—å¯¾å¿œ)"""
        # Implementation
        ...
    
    @tool
    async def search_knowledge(self, query: str, top_k: int = 5) -> list:
        """Bedrock Knowledge Base ã‹ã‚‰æƒ…å ±å–å¾—"""
        # Implementation
        ...
    
    @tool
    async def retrieve_from_s3_vectors(
        self, 
        query_text: str = None,
        query_image: str = None,
        top_k: int = 10
    ) -> list:
        """S3 Vectors ã§ãƒãƒ«ãƒãƒ¢ãƒ¼ãƒ€ãƒ«é¡ä¼¼æ¤œç´¢"""
        # Implementation
        ...
    
    async def process(self, user_input: str, session_id: str) -> str:
        """
        Agent Core ã®ãƒ¡ã‚¤ãƒ³å‡¦ç†
        - ãƒ„ãƒ¼ãƒ«é¸æŠã¯ Agent ãŒè‡ªå‹•åˆ¤æ–­
        - ãƒ¡ãƒ¢ãƒªã‹ã‚‰éå»ã®ä¼šè©±ã‚’å‚ç…§
        - ã‚¬ãƒ¼ãƒ‰ãƒ¬ãƒ¼ãƒ«ã§å®‰å…¨æ€§ãƒã‚§ãƒƒã‚¯
        """
        return await self.agent.run(
            user_input,
            session_id=session_id
        )
```

### 2. S3 Vectors (Preview - 2025.07~)

**OpenSearch Serverless ã‹ã‚‰ã®ç§»è¡Œç†ç”±:**

| é …ç›® | OpenSearch Serverless | S3 Vectors |
|------|----------------------|------------|
| **æœˆé¡ã‚³ã‚¹ãƒˆ** | ~$100/æœˆã€œ (2 OCUæœ€ä½) | ~$10/æœˆã€œ (ä½¿ç”¨é‡èª²é‡‘) |
| **ã‚¹ã‚±ãƒ¼ãƒ«** | æ‰‹å‹•èª¿æ•´å¿…è¦ | è‡ªå‹• (ãƒšã‚¿ãƒã‚¤ãƒˆå¯¾å¿œ) |
| **ãƒ¬ã‚¤ãƒ†ãƒ³ã‚·** | ãƒŸãƒªç§’ã€œç§’ | ã‚µãƒ–ç§’ |
| **çµ±åˆ** | åˆ¥é€”è¨­å®šå¿…è¦ | S3 ãƒã‚¤ãƒ†ã‚£ãƒ– |
| **é‹ç”¨** | ã‚¯ãƒ©ã‚¹ã‚¿ãƒ¼ç®¡ç† | ãƒ•ãƒ«ãƒãƒãƒ¼ã‚¸ãƒ‰ |

**S3 Vectors çµ±åˆå®Ÿè£…:**

```python
import boto3

class S3VectorsClient:
    """S3 Vectors ã‚’ä½¿ç”¨ã—ãŸãƒ™ã‚¯ãƒˆãƒ«æ¤œç´¢"""
    
    def __init__(self, bucket_name: str, index_name: str):
        self.s3_vectors = boto3.client('s3vectors')  # æ–°ã—ã„ API
        self.bucket_name = bucket_name
        self.index_name = index_name
    
    def create_vector_index(self, dimension: int = 1024):
        """ãƒ™ã‚¯ãƒˆãƒ«ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚’ä½œæˆ"""
        self.s3_vectors.create_index(
            BucketName=self.bucket_name,
            IndexName=self.index_name,
            IndexConfig={
                'Dimension': dimension,
                'DistanceMetric': 'cosine',  # or 'euclidean', 'dot_product'
            }
        )
    
    def upsert_vectors(self, vectors: list[dict]):
        """ãƒ™ã‚¯ãƒˆãƒ«ã‚’è¿½åŠ /æ›´æ–°
        
        Args:
            vectors: [
                {
                    'id': 'doc-001',
                    'embedding': [0.1, 0.2, ...],  # 1024æ¬¡å…ƒ
                    'metadata': {'source': 'audio', 'title': 'ä¼šè­°éŒ²éŸ³'}
                }
            ]
        """
        self.s3_vectors.upsert_vectors(
            BucketName=self.bucket_name,
            IndexName=self.index_name,
            Vectors=vectors
        )
    
    def query(
        self, 
        query_embedding: list[float], 
        top_k: int = 10,
        filter_expression: dict = None
    ) -> list[dict]:
        """é¡ä¼¼ãƒ™ã‚¯ãƒˆãƒ«æ¤œç´¢"""
        response = self.s3_vectors.query(
            BucketName=self.bucket_name,
            IndexName=self.index_name,
            QueryVector=query_embedding,
            TopK=top_k,
            Filter=filter_expression
        )
        return response['Matches']
```

### 3. Nova Models çµ±åˆãƒ‘ã‚¿ãƒ¼ãƒ³

**ãƒ‘ã‚¿ãƒ¼ãƒ³1: Agent ä¸»å°å‹** (æ¨å¥¨)

```
User Input
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Agent Core     â”‚ â† Claude 3.5 Sonnet ãŒãƒ„ãƒ¼ãƒ«é¸æŠã‚’åˆ¤æ–­
â”‚  (Orchestrator) â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
    â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â–¼         â–¼             â–¼
 Nova      Nova         S3 Vectors
 Sonic     Omni         + Embeddings
    â”‚         â”‚             â”‚
    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
    â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼
    Agent ãŒçµæœã‚’çµ±åˆãƒ»å¿œç­”ç”Ÿæˆ
```

**ãƒ‘ã‚¿ãƒ¼ãƒ³2: ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³å‹**

```
å…¥åŠ›ãƒ‡ãƒ¼ã‚¿
    â”‚
    â”œâ”€â”€ Audio â†’ Nova Sonic â†’ Transcription
    â”‚
    â”œâ”€â”€ Video â†’ Nova Omni â†’ Analysis
    â”‚
    â””â”€â”€ Query â†’ Nova Embeddings â†’ S3 Vectors Search
                    â”‚
                    â–¼
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚  Agent Core   â”‚ â† å‰å‡¦ç†çµæœã‚’ã‚‚ã¨ã«æ¨è«–
            â”‚  (Reasoning)  â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ãƒ‘ã‚¿ãƒ¼ãƒ³3: Multi-Agent å”èª¿å‹**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    COORDINATOR AGENT                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚                   â”‚                   â”‚
       â–¼                   â–¼                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Audio       â”‚     â”‚ Vision      â”‚     â”‚ Search      â”‚
â”‚ Specialist  â”‚     â”‚ Specialist  â”‚     â”‚ Specialist  â”‚
â”‚ Agent       â”‚     â”‚ Agent       â”‚     â”‚ Agent       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                   â”‚                   â”‚
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â–¼
                   çµ±åˆçµæœã‚’ç”Ÿæˆ
```

---

## ğŸ“ ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆ

```
rd-bedrock-nova/
â”œâ”€â”€ README.md                      # ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«
â”œâ”€â”€ architecture-prot.md           # å…ƒã®è¨­è¨ˆå‚ç…§è³‡æ–™
â”œâ”€â”€ pyproject.toml                 # Python ä¾å­˜é–¢ä¿‚
â”œâ”€â”€ Makefile                       # ãƒ“ãƒ«ãƒ‰ãƒ»ãƒ‡ãƒ—ãƒ­ã‚¤
â”œâ”€â”€ docker-compose.yml             # ãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™ºç’°å¢ƒ
â”‚
â”œâ”€â”€ docs/                          # è¨­è¨ˆãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
â”‚   â”œâ”€â”€ 01-planning-analysis/      # RDRA, DDD, Event Storming
â”‚   â”œâ”€â”€ 02-architecture/           # Clean Architecture, CQRS
â”‚   â”œâ”€â”€ 03-frontend/               # FSD, Atomic Design
â”‚   â”œâ”€â”€ 04-testing/                # TDD Strategy
â”‚   â””â”€â”€ 05-infrastructure/         # AWS Infrastructure
â”‚
â”œâ”€â”€ infra/                         # AWS CDK (Python)
â”‚   â”œâ”€â”€ app.py
â”‚   â””â”€â”€ stacks/
â”‚       â”œâ”€â”€ network_stack.py       # VPC, Subnets
â”‚       â”œâ”€â”€ data_stack.py          # DynamoDB, S3, Redis
â”‚       â”œâ”€â”€ compute_stack.py       # ECS Fargate
â”‚       â””â”€â”€ events_stack.py        # EventBridge
â”‚
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ agent/                     # ğŸ†• Strands Agent Core å®Ÿè£…
â”‚   â”‚   â”œâ”€â”€ coordinator.py         # ãƒ¡ã‚¤ãƒ³ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ
â”‚   â”‚   â”œâ”€â”€ tools/                 # ãƒ„ãƒ¼ãƒ«å®šç¾©
â”‚   â”‚   â”‚   â”œâ”€â”€ audio_tool.py
â”‚   â”‚   â”‚   â”œâ”€â”€ video_tool.py
â”‚   â”‚   â”‚   â””â”€â”€ search_tool.py
â”‚   â”‚   â”œâ”€â”€ memory/                # ãƒ¡ãƒ¢ãƒªç®¡ç†
â”‚   â”‚   â””â”€â”€ guardrails/            # ã‚¬ãƒ¼ãƒ‰ãƒ¬ãƒ¼ãƒ«
â”‚   â”‚
â”‚   â”œâ”€â”€ vector/                    # ğŸ†• S3 Vectors çµ±åˆ
â”‚   â”‚   â”œâ”€â”€ client.py              # S3 Vectors ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ
â”‚   â”‚   â”œâ”€â”€ indexer.py             # ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ç®¡ç†
â”‚   â”‚   â””â”€â”€ embeddings.py          # Nova Embeddings é€£æº
â”‚   â”‚
â”‚   â”œâ”€â”€ services/                  # ãƒã‚¤ã‚¯ãƒ­ã‚µãƒ¼ãƒ“ã‚¹ (ECS)
â”‚   â”‚   â”œâ”€â”€ agent_core/            # Agent API
â”‚   â”‚   â”œâ”€â”€ audio/                 # Audio Service
â”‚   â”‚   â”œâ”€â”€ video/                 # Video Service
â”‚   â”‚   â””â”€â”€ search/                # Search Service
â”‚   â”‚
â”‚   â”œâ”€â”€ domain/                    # DDD ãƒ‰ãƒ¡ã‚¤ãƒ³ãƒ¢ãƒ‡ãƒ«
â”‚   â”œâ”€â”€ application/               # ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹
â”‚   â””â”€â”€ infrastructure/            # ã‚¤ãƒ³ãƒ•ãƒ©å±¤
â”‚
â””â”€â”€ tests/
    â”œâ”€â”€ unit/
    â””â”€â”€ integration/
```

---

## ğŸš€ ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

### Prerequisites

- Python 3.12+
- AWS CLI v2 configured
- Docker & Docker Compose
- AWS CDK CLI

### ãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™º

```bash
# ä¾å­˜é–¢ä¿‚ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
make dev-install

# ãƒ­ãƒ¼ã‚«ãƒ«ç’°å¢ƒèµ·å‹• (Docker Compose)
make local

# Agent Core å˜ä½“èµ·å‹•
make run-agent-core
```

### AWS ãƒ‡ãƒ—ãƒ­ã‚¤

```bash
# Docker ã‚¤ãƒ¡ãƒ¼ã‚¸ãƒ“ãƒ«ãƒ‰
make build

# ECR ãƒ—ãƒƒã‚·ãƒ¥
make push

# CDK ãƒ‡ãƒ—ãƒ­ã‚¤
make deploy
```

---

## ğŸ”¬ ç ”ç©¶ãƒ»æ¤œè¨¼é …ç›®

### Phase 1: Agent Core åŸºç›¤ (Current)

- [ ] Strands SDK çµ±åˆ
- [ ] Tool Orchestration ãƒ‘ã‚¿ãƒ¼ãƒ³æ¤œè¨¼
- [ ] Memory ç®¡ç† (Redis + DynamoDB)
- [ ] Guardrails çµ±åˆ

### Phase 2: S3 Vectors çµ±åˆ

- [ ] S3 Vectors API æ¤œè¨¼ (Preview)
- [ ] Nova Embeddings â†’ S3 Vectors ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³
- [ ] Hybrid Search (ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ + ãƒ™ã‚¯ãƒˆãƒ«)
- [ ] ã‚³ã‚¹ãƒˆæ¯”è¼ƒ (vs OpenSearch)

### Phase 3: ãƒãƒ«ãƒãƒ¢ãƒ¼ãƒ€ãƒ«çµ±åˆ

- [ ] Nova Sonic (Speech) çµ±åˆ
- [ ] Nova Omni (Vision + Temporal) çµ±åˆ
- [ ] Cross-modal Search å®Ÿè£…

### Phase 4: æœ¬ç•ªåŒ–æº–å‚™

- [ ] ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒãƒ¥ãƒ¼ãƒ‹ãƒ³ã‚°
- [ ] ã‚³ã‚¹ãƒˆæœ€é©åŒ–
- [ ] ç›£è¦–ãƒ»ã‚¢ãƒ©ãƒ¼ãƒˆè¨­è¨ˆ
- [ ] ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£å¼·åŒ–

---

## ğŸ“š å‚è€ƒè³‡æ–™

- [Amazon Bedrock Nova Series](https://aws.amazon.com/bedrock/nova/)
- [AWS Strands Agents SDK](https://github.com/strands-agents/strands-agents-sdk)
- [Amazon S3 Vectors (Preview)](https://aws.amazon.com/s3/vectors/)
- [Bedrock Knowledge Bases](https://docs.aws.amazon.com/bedrock/latest/userguide/knowledge-base.html)
- [12-Factor App Agents](./docs/02-architecture/03-12factor-agents.md)

---

## ğŸ“ License

MIT License - See [LICENSE](./LICENSE)

